<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">

<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 2px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 7px #1E92FB, 0 0 4px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: transparent;    /*上边框颜色*/
        border-left-color: transparent;    /*左边框颜色*/
    }
</style>








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/yi.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/yi.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Ajax," />










<meta name="description" content="Ajax浏览器的组成 用户界面（User Interface） 包括地址栏、后退/前进按钮、书签目录等，也就是你所看到的除了用来显示你所请求页面的主窗口之外的其他部分   浏览器引擎（Browser engine） 用来查询及操作渲染引擎的接口   渲染引擎（浏览器内核）（Rendering engine） 用来显示请求的内容，例如，如果请求内容为html，它负责解析html及css，并将解析后的">
<meta name="keywords" content="Ajax">
<meta property="og:type" content="article">
<meta property="og:title" content="Ajax">
<meta property="og:url" content="http://yoursite.com/zh-cn/2017/09/10/AJAX/index.html">
<meta property="og:site_name" content="嗯，一点余温">
<meta property="og:description" content="Ajax浏览器的组成 用户界面（User Interface） 包括地址栏、后退/前进按钮、书签目录等，也就是你所看到的除了用来显示你所请求页面的主窗口之外的其他部分   浏览器引擎（Browser engine） 用来查询及操作渲染引擎的接口   渲染引擎（浏览器内核）（Rendering engine） 用来显示请求的内容，例如，如果请求内容为html，它负责解析html及css，并将解析后的">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-08-11T05:53:56.059Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ajax">
<meta name="twitter:description" content="Ajax浏览器的组成 用户界面（User Interface） 包括地址栏、后退/前进按钮、书签目录等，也就是你所看到的除了用来显示你所请求页面的主窗口之外的其他部分   浏览器引擎（Browser engine） 用来查询及操作渲染引擎的接口   渲染引擎（浏览器内核）（Rendering engine） 用来显示请求的内容，例如，如果请求内容为html，它负责解析html及css，并将解析后的">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/zh-cn/2017/09/10/AJAX/"/>





  <title>Ajax | 嗯，一点余温</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?01076d8c1ebce03ed408a2a36a23aa85";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">嗯，一点余温</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Shiyi_</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/zh-cn/2017/09/10/AJAX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shiyi_">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="嗯，一点余温">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Ajax</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-10T20:42:35+08:00">
                2017-09-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ajax/" itemprop="url" rel="index">
                    <span itemprop="name">Ajax</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h1><h2 id="浏览器的组成"><a href="#浏览器的组成" class="headerlink" title="浏览器的组成"></a>浏览器的组成</h2><ul>
<li>用户界面（User Interface）<ul>
<li>包括地址栏、后退/前进按钮、书签目录等，也就是你所看到的除了用来显示你所请求页面的主窗口之外的其他部分</li>
</ul>
</li>
<li>浏览器引擎（Browser engine）<ul>
<li>用来查询及操作渲染引擎的接口</li>
</ul>
</li>
<li>渲染引擎（浏览器内核）（Rendering engine）<ul>
<li>用来显示请求的内容，例如，如果请求内容为html，它负责解析html及css，并将解析后的结果显示出来</li>
<li>主流的渲染引擎<ul>
<li>Chrome浏览器: Blink引擎（WebKit的一个分支）。</li>
<li>Safari浏览器: WebKit引擎，windows版本2008年3月18日推出正式版，但苹果已于2012年7月25日停止开发Windows版的Safari。</li>
<li>FireFox浏览器: Gecko引擎。</li>
<li>Opera浏览器: Blink引擎(早期版使用Presto引擎）。</li>
<li>Internet Explorer浏览器: Trident引擎。</li>
<li>Microsoft Edge浏览器: EdgeHTML引擎（Trident的一个分支）。</li>
</ul>
</li>
<li>渲染引擎工作原理<ol>
<li>解析HTML构建Dom树，DOM 是W3C组织推荐的处理可扩展置标语言的标准编程接口。</li>
<li>构建渲染树，渲染树并不等同于Dom树，因为像<code>head</code>标签 或 <code>display: none</code>这样的元素就没有必要放到渲染树中了，但是它们在Dom树中。</li>
<li>对渲染树进行布局，定位坐标和大小、确定是否换行、确定position、overflow、z-index等等，这个过程叫<code>layout</code> 或 <code>reflow</code>。</li>
<li>绘制渲染树，调用操作系统底层API(UI Backend)进行绘图操作。</li>
</ol>
</li>
</ul>
</li>
<li>JS解释器（JavaScript Interpreter）<ul>
<li>用来解释执行JS代码</li>
</ul>
</li>
<li>网络（Networking）<ul>
<li>用来完成网络调用，例如http请求，它具有平台无关的接口，可以在不同平台上工作</li>
</ul>
</li>
<li>UI后端（UI Backend）<ul>
<li>用来绘制类似组合选择框及对话框等基本组件，具有不特定于某个平台的通用接口，底层使用操作系统的用户接口</li>
</ul>
</li>
<li>数据存储（Data Persistence）<ul>
<li>属于持久层，浏览器需要在硬盘中保存类似cookie的各种数据，HTML5定义了Storage技术，这是一种轻量级完整的客户端存储技术</li>
</ul>
</li>
</ul>
<h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><p>服务器软件</p>
<p>使计算机具备提供某种服务能力的应用软件，称为服务器软件，通过安装相应的服务软件，然后进行配置后就可以使计算具备了提供某种服务的能力。</p>
<ol>
<li>文件服务器：Server-U、FileZilla、VsFTP等（FTP是File Transfer Protocol文件传输协议）；</li>
<li>数据库服务器：oracle、mysql、SQL server、DB2、ACCESS等；</li>
<li>邮件服务器：Postfix、Sendmail等；</li>
<li>HTTP服务器：Apache、Nginx、IIS、Tomcat、NodeJS等；</li>
</ol>
<p>服务器类型</p>
<ol>
<li>按服务类型可分为：文件服务器、数据库服务器、邮件服务器、Web服务器等；</li>
<li>按操作系统可分为：Linux服务器、Windows服务器等；</li>
<li>按应用软件可分为 Apache服务器、Nginx 服务器、IIS服务器、Tomcat服务器、weblogic服务器、WebSphere服务器、boss服务器、 Node服务器等；</li>
</ol>
<p>HTTP服务器</p>
<p>前端打交道的服务器；</p>
<ul>
<li>即网站服务器，主要提供文档(文本、图片、视频、音频)浏览服务，一般安装Apache、Nginx服务器软件。</li>
<li>HTTP服务器可以结合某一编程语言处理业务逻辑，由此进行的开发，通常称之为服务端开发。</li>
<li>常见的运行在服务端的编程语言包括 php、java、.net、Python、Ruby、Perl等。</li>
</ul>
<p>服务器总结</p>
<ol>
<li>服务器说白了就是计算机，通过安装了某些软件，就可以提供某些特定的服务器。</li>
<li>根据服务器软件的功能，名称，安装的系统这些不同的标准，可以对服务器划分成不同的类型。</li>
<li>HTTP服务器主要提供网站浏览服务，通常需要结合某种编程语言进行开发，我们通常称之为服务器开发。</li>
<li>专业的服务器与计算机的区别<ul>
<li>稳定性：服务器要求7*24不间断运行。</li>
<li>性能：服务器能够同时响应更多客户端的请求。</li>
<li>价格：服务器价格通常比普通计算机贵很多。</li>
</ul>
</li>
</ol>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><p>具有向服务器索取服务能力的终端，叫做客户端。</p>
<p>客户端：电脑、平板、手机安装了客户端软件，就可以称为客户端</p>
<p>浏览器===&gt;索取网站服务浏览的软件</p>
<ul>
<li>对于前端工程师而言，主要接触到的客户端软件就是浏览器，当然也可能会涉及大一些app开发。</li>
<li>以浏览器为宿主环境，结合 HTML、CSS、Javascript等技术，而进行的一系列开发，通常称之为前端开发。</li>
</ul>
<p>服务器与客户端的关系</p>
<ul>
<li>客户端：安装客户端软件，索取服务的一方</li>
<li>服务器：安装服务器软件，提供服务的一方</li>
</ul>
<p>软件架构</p>
<p>CS架构</p>
<p>Client/Server架构，即客户端/服务器架构。是大家所熟悉的软件体系结构。需要安装对应的客户端软件，才能获取相应的服务。</p>
<p>常见的CS架构：QQ、LOL、微信等</p>
<p>特点：</p>
<ul>
<li>需要安装才是使用</li>
<li>性能高效，使用更加稳定和流畅</li>
<li>开发和维护难度更大。</li>
<li>需要更新</li>
<li>需要兼容操作系统。</li>
</ul>
<p>BS架构</p>
<ul>
<li>不需要安装，只需要浏览器即可。</li>
<li>相比CS架构，性能相对较差，没有那么流畅和稳定。</li>
<li>开发维护方便。</li>
<li>不需要更新</li>
<li>不用兼容操作系统。但是需要兼容浏览器。</li>
</ul>
<h2 id="搭建HTTP服务器"><a href="#搭建HTTP服务器" class="headerlink" title="搭建HTTP服务器"></a>搭建HTTP服务器</h2><h3 id="phpStudy介绍"><a href="#phpStudy介绍" class="headerlink" title="phpStudy介绍"></a>phpStudy介绍</h3><p>phpStudy是一个PHP调试环境的程序集成包。</p>
<p>该程序包集成最新的Apache+PHP+MySQL,安装非常的简单</p>
<h3 id="phpStudy的安装"><a href="#phpStudy的安装" class="headerlink" title="phpStudy的安装"></a>phpStudy的安装</h3><p>安装phpStudy，解压双击安装(非中文路径)，其它默认安装。</p>
<p>推荐就安装在默认的目录下，一定不能有中文，否则肯定启动不起来。</p>
<h3 id="phpStudy的错误解决"><a href="#phpStudy的错误解决" class="headerlink" title="phpStudy的错误解决"></a>phpStudy的错误解决</h3><ul>
<li>关闭iis服务器</li>
<li>提示缺少vc9 库文件</li>
<li>关闭防火墙</li>
<li>新版的phpStudy需要设置</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">You don't have permission to access</span><br><span class="line"></span><br><span class="line">首先有两种情况导致该问题产生</span><br><span class="line"></span><br><span class="line">第一种情况，没有选择面板中的【其他选项菜单】-【phpstudy设置】-【允许目录列表】。</span><br><span class="line">新版phpStudy为了安全，取消Apache和nginx列出目录内容。</span><br><span class="line"></span><br><span class="line">phpStudy如何禁止或允许站点目录列表</span><br><span class="line"></span><br><span class="line">请使用『其他选项菜单』-『phpStudy设置』-『允许目录列表』，打上对勾表示允许目录列表，去掉对勾表示禁止目录列表。</span><br><span class="line"></span><br><span class="line">第二种情况，配置多域名的虚拟主机。</span><br><span class="line"></span><br><span class="line">phpStudy如何添加多站点,站点域名设置；请使用『其他选项菜单』-『站点域名管理』。</span><br><span class="line"></span><br><span class="line">最后看到phpStudy使用手册中的如何添加多站点，通过使用phpStudy界面的『其他选项菜单』-『站点域名管理』按钮方式进行设置，设置后正确配置虚拟主机。</span><br><span class="line"></span><br><span class="line">配置后找到配置文件目录下的vhosts文件查看，原来添加了如下代码，经测试，直接添加如下代码也可用。</span><br><span class="line"></span><br><span class="line">DocumentRoot "D:asuewww"</span><br><span class="line">  Options -Indexes +FollowSymLinks +ExecCGI</span><br><span class="line">  AllowOverride All</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Allow from all</span><br><span class="line">  Require all granted</span><br><span class="line"></span><br><span class="line">DocumentRoot "D:myenvasuewwwasuepublic"</span><br><span class="line">ServerName nasue.com</span><br><span class="line">ServerAlias nasue.com</span><br><span class="line"></span><br><span class="line">  Options FollowSymLinks ExecCGI</span><br><span class="line">  AllowOverride All</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Allow from all</span><br><span class="line">  Require all granted</span><br><span class="line"></span><br><span class="line">DocumentRoot "D:wwwasuepublic"</span><br><span class="line">ServerName nasue.com</span><br><span class="line">ServerAlias nasue.com</span><br><span class="line"></span><br><span class="line">  Options FollowSymLinks ExecCGI</span><br><span class="line">  AllowOverride All</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Allow from all</span><br><span class="line">  Require all granted</span><br></pre></td></tr></table></figure>
<h2 id="网络基础"><a href="#网络基础" class="headerlink" title="网络基础"></a>网络基础</h2><h3 id="ip地址"><a href="#ip地址" class="headerlink" title="ip地址"></a>ip地址</h3><p>所谓IP地址就是给每个连接在互联网上的主机分配的一个32位地址。(就像每部手机能正常通话需要一个号码一样)</p>
<p>通过ip就可以找到具体的某一台计算机。例 192.168.1.110</p>
<p>查看本机IP地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ping、ipconfig、ifconfig（linux）</span><br><span class="line"><span class="comment"># 查看和某个同学的电脑是否连通</span></span><br><span class="line">ping 192.168.1.110</span><br></pre></td></tr></table></figure>
<h3 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h3><ul>
<li>端口号是计算机与外界通讯交流的出口，每个端口对应不同的服务。</li>
<li>现实生活中，银行不同的窗口办理不同的业务。</li>
<li>查看端口占用情况 <code>netstat -an</code></li>
<li>常见端口号 80(http)、403(https)、21(ftp文件传输协议)、22(ssh远程登录协议)</li>
</ul>
<h3 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h3><p>由于IP地址基于数字，不方便记忆，于是便用域名来代替IP地址，域名是一个IP地址的“面具”；每一个域名都会对应了至少一个ip地址。</p>
<p>查看域名对应的IP地址 ping</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping jd.com  //可以获取到京东的ip</span><br></pre></td></tr></table></figure>
<h3 id="DNS服务器"><a href="#DNS服务器" class="headerlink" title="DNS服务器"></a>DNS服务器</h3><p>DNS（Domain Name System）因特网上作为域名和IP地址相互映射的一个分布式数据库， 能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。</p>
<p>简单的说就是记录IP地址和域名之间对应关系的服务。</p>
<h3 id="本地hosts"><a href="#本地hosts" class="headerlink" title="本地hosts"></a>本地hosts</h3><p>Hosts是一个没有扩展名的系统文件，可以用记事本等工具打开，其作用就是将一些常用的网址域名与其对应的IP地址建立一个关联“数据库”，当用户在浏览器中输入一个需要登录的网址时，系统会首先自动从Hosts文件中寻找对应的IP地址，一旦找到，系统会立即打开对应网页，如果没有找到，则系统会再将网址提交DNS域名解析服务器进行IP地址的解析。</p>
<p>hosts文件的地址：<code>C:\Windows\System32\drivers\etc</code></p>
<h3 id="浏览器访问流程"><a href="#浏览器访问流程" class="headerlink" title="浏览器访问流程"></a>浏览器访问流程</h3><ul>
<li>浏览器通过域名访问网页，</li>
<li>先查找本地hosts文件，如果有对应域名的ip的地址，就直接访问这个ip地址；</li>
<li>如果本地hosts文件没有对应的ip地址，就访问DNS服务器，获取到域名对应的ip地址，访问这个ip地址；</li>
<li>访问ip对应的服务器，服务器响应，返回这个请求；</li>
</ul>
<p>例如京东</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jd.com:80/index.html</span><br><span class="line">:80/index.html可以省略，http服务端口默认为80</span><br></pre></td></tr></table></figure>
<p>http服务端口默认为80</p>
<h2 id="PHP基础"><a href="#PHP基础" class="headerlink" title="PHP基础"></a>PHP基础</h2><ul>
<li>文件以.php后缀结尾，所有程序包含在 <code>&lt;?php 这里是代码 ?&gt;</code></li>
<li>避免使用中文目录和中文文件名</li>
<li>php页面无法直接打开需要运行在服务器环境当中</li>
</ul>
<p>注意：学习php的目的是辅助学习ajax，因为我们需要了解一点后台的知识，千万不要本末倒置的跑去学习php语法。</p>
<h3 id="PHP初体验"><a href="#PHP初体验" class="headerlink" title="PHP初体验"></a>PHP初体验</h3><p>语法：<code>&lt;?php     ?&gt;</code></p>
<ul>
<li>PHP语法中结束必须在末尾加;号，否则会报错；最后一句可以省略（没啥用）；</li>
<li>服务器解析PHP文件中的中文以gbk编码解析；浏览器以UTF-8编码，会出现乱码；</li>
<li><code>header(&quot;content-Type:text/html;charset=utf-8&quot;);</code><ul>
<li><code>content-Type:text/html;</code> 返回内容是一个HTML文档，这样设置后，就能识别HTML标签了。</li>
<li><code>charset=utf-8</code> 设置编码集</li>
<li>中文不会乱码，识别HTML标签；</li>
</ul>
</li>
</ul>
<h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><h4 id="PHP变量"><a href="#PHP变量" class="headerlink" title="PHP变量"></a>PHP变量</h4><p>php是一门弱类型语法，变量的类型可以随意改变。变量其实就是存储数据的容器；</p>
<p>变量命名规则</p>
<ol>
<li>不需要关键字进行声明，变量在第一次赋值的时候被创建。</li>
<li>必须以$符号开始</li>
<li>$后面的命名规则与js的变量命名规则一致。</li>
</ol>
<p>数据类型</p>
<ul>
<li>字符串</li>
<li>数字</li>
<li>浮点型</li>
<li>布尔类型，如果打印，true显示为1，false显示为空串；实际还是布尔类型；</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$flag = <span class="keyword">true</span>;</span><br><span class="line"><span class="comment">//当布尔类型值为true时，输出1</span></span><br><span class="line"><span class="keyword">echo</span> $flag;</span><br><span class="line">$flag = <span class="keyword">false</span>;</span><br><span class="line"><span class="comment">//当布尔类型为false时，输出空字符串</span></span><br><span class="line"><span class="keyword">echo</span> $flag;</span><br></pre></td></tr></table></figure>
<p>php中+号只是数学运算符，不能用来拼串；</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 在php中，+号只有算数的功能，并不能拼串</span></span><br><span class="line"><span class="comment">// 2. 在php中，拼串使用.</span></span><br><span class="line">$name = <span class="string">"胡聪聪"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"大家好，我是"</span> . $name . <span class="string">"，今年18岁"</span>;</span><br></pre></td></tr></table></figure>
<p>用.拼串</p>
<p>php中””和’’不同，””识别其中包含的变量；’’不能识别；</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 字符串的定义可以使用单引号，也可以使用双引号</span></span><br><span class="line">$name = <span class="string">"胡聪聪"</span>;</span><br><span class="line">$desc = <span class="string">'很帅'</span>;</span><br><span class="line"><span class="comment">//2. 在单引号中，完全当做字符看待</span></span><br><span class="line"><span class="comment">//3. 在双引号中，能够识别变量。如果有变量格式的字符串，可以直接解析</span></span><br><span class="line"></span><br><span class="line">$name = <span class="string">"胡聪聪"</span>;<span class="comment">//胡聪聪</span></span><br><span class="line"><span class="keyword">echo</span> $name;</span><br><span class="line">$desc = <span class="string">'很帅'</span>;</span><br><span class="line"><span class="keyword">echo</span> $desc;<span class="comment">//很帅</span></span><br><span class="line"></span><br><span class="line">$str = <span class="string">'$name 很帅'</span>;<span class="comment">//$name 很帅</span></span><br><span class="line"><span class="keyword">echo</span> $str;</span><br><span class="line"></span><br><span class="line">$str = <span class="string">"$name 很帅"</span>;<span class="comment">//胡聪聪 很帅</span></span><br><span class="line"><span class="keyword">echo</span> $str;</span><br></pre></td></tr></table></figure>
<h4 id="PHP数组"><a href="#PHP数组" class="headerlink" title="PHP数组"></a>PHP数组</h4><p>索引数组–类似js中的数组；</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$arr = <span class="keyword">array</span>(<span class="string">"张飞"</span>,<span class="string">"赵云"</span>,<span class="string">"马超"</span>);</span><br><span class="line"><span class="keyword">echo</span> $arr;<span class="comment">//echo只能打印基本数据类型</span></span><br><span class="line"><span class="keyword">echo</span> $arr[<span class="number">0</span>];<span class="comment">//张飞</span></span><br></pre></td></tr></table></figure>
<p>关联数组–类似js中的对象；</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//属性名必须用引号引起来</span></span><br><span class="line">$arr = <span class="keyword">array</span>(<span class="string">"name"</span>=&gt;<span class="string">"zhangsan"</span>, <span class="string">"age"</span>=&gt;<span class="number">18</span>);</span><br><span class="line"><span class="keyword">echo</span> $arr[<span class="string">"name"</span>];</span><br></pre></td></tr></table></figure>
<p>获取数组的长度：<code>count($arr)</code></p>
<h4 id="输出语句"><a href="#输出语句" class="headerlink" title="输出语句"></a>输出语句</h4><ol>
<li><code>echo</code> 输出简单数据类型</li>
<li><code>print_r</code> 输出数据结构，一般用于输出复杂类型。<code>print_r</code> 是一个函数，不要忘记小括号</li>
<li><code>var_dump</code> 输出完整的数据结构，包括类型，一般用于精准调试</li>
</ol>
<h4 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h4><p>判断语句</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$age = <span class="number">17</span>;</span><br><span class="line"><span class="keyword">if</span> ($age &gt;= <span class="number">18</span>) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"终于可以看电影了,嘿嘿嘿"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"哎，还是回家学习把"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>循环语句</p>
<p>遍历索引数组</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$arr = <span class="keyword">array</span>(<span class="string">"张三"</span>, <span class="string">"李四"</span>, <span class="string">"王五"</span>, <span class="string">"赵六"</span>, <span class="string">"田七"</span>, <span class="string">"王八"</span>);</span><br><span class="line"><span class="comment">//获取数组的长度： count($arr)</span></span><br><span class="line"><span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; count($arr); $i++) &#123;</span><br><span class="line">  <span class="keyword">echo</span> $arr[$i];</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>遍历关联数组</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//遍历关联数组</span></span><br><span class="line">$arr = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">"name"</span>=&gt;<span class="string">"zs"</span>,</span><br><span class="line">  <span class="string">"age"</span>=&gt;<span class="number">18</span>,</span><br><span class="line">  <span class="string">"sex"</span>=&gt;<span class="number">20</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">foreach</span>($arr <span class="keyword">as</span> $key =&gt; $value) &#123;</span><br><span class="line">  <span class="keyword">echo</span> $key . <span class="string">"="</span> . $value . <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="表单处理"><a href="#表单处理" class="headerlink" title="表单处理"></a>表单处理</h3><p>表单（form）：表单用于收集用户输入信息，并将数据提交给服务器。是一种常见的与服务端数据交互的一种方式</p>
<ol>
<li>action：指定表单的提交地址</li>
<li>method:指定表单的提交方式，get/post，默认get</li>
<li>input的数据想要提交到后台，必须指定name属性，后台通过name属性获取值</li>
<li>想要提交表单，不能使用 <code>input:button</code> 必须使用 <code>input:submit</code></li>
</ol>
<p>php获取表单数据</p>
<p><code>$_GET</code> 是系统提供的一个变量，是一个数组，里面存放了表单通过get方式提交的数据。</p>
<p><code>$_POST</code> 是系统提供的一个变量，是一个数组，里面存放了表单通过post方式提交的数据。</p>
<p>get与post的区别</p>
<ol>
<li>get方式<br>1.1 数据会拼接在url地址的后面<code>?username=hcc&amp;password=123456</code><br>1.2 地址栏有长度限制，因此get方式提交数据大小不会超过4k</li>
<li>post方式<br>2.1 数据不会在url中显示，相比get方式，post更安全<br>2.2 提交的数据没有大小限制</li>
</ol>
<p>根据HTTP规范，GET用于信息获取，POST表示可能修改变服务器上的资源的请求</p>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><p>html要求</p>
<ol>
<li>文件上传的提交方式必须是post方式</li>
<li>需要给form指定enctype=”multipart/form-data”</li>
<li>指定name属性，后台才能获取到</li>
</ol>
<p>php相关</p>
<p>文件上传时，$_GET与$_POST都无法获取到文件信息，通过$_FILES才能获取到，这是一个数组。</p>
<p>上传文件时，文件会临时保存在服务器上，如果文件最终没有保存，那么临时文件会被删除，保证服务器安全。</p>
<p>sleep(10)可以让代码延迟10秒钟才执行。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">move_uploaded_file($path, $newPath); <span class="comment">//可以保存临时图片</span></span><br><span class="line">$path = $_FILES[<span class="string">'upload'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">$newPath = <span class="string">"./uploads/test.png"</span>;</span><br><span class="line"><span class="comment">//第一个参数：临时文件的路径</span></span><br><span class="line"><span class="comment">//第二个参数：保存的文件路径</span></span><br><span class="line">move_uploaded_file($path, $newPath);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;img src='./uploads/test.png'&gt;"</span>;</span><br></pre></td></tr></table></figure>
<h2 id="服务端渲染"><a href="#服务端渲染" class="headerlink" title="服务端渲染"></a>服务端渲染</h2><h3 id="动态页面与静态页面"><a href="#动态页面与静态页面" class="headerlink" title="动态页面与静态页面"></a>动态页面与静态页面</h3><ul>
<li>静态页面：静态页面的内容和结构都是写死的，不会变化的，实实在在存在服务器上的html文件；</li>
<li>动态页面：页面的内容会根据后台数据实时生成的，结构根据新生成的内容发生变化，存在服务端是一个php或者jsp文件，根据用户访问的时候，实时动态变化；</li>
</ul>
<h3 id="服务端渲染页面"><a href="#服务端渲染页面" class="headerlink" title="服务端渲染页面"></a>服务端渲染页面</h3><p>前端程序员将静态页面写好以后，交给后端开发人员，由后端开发人员根据数据库内容动态渲染，叫做服务端渲染；<br>以前很长一段时间的开发模式就是这样的，前端工程师先把html页面写好，后端程序员把html页面后缀改成(php)（jsp）(asp)页面，然后将数据渲染出来。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="comment">//这个属性是可以通过数据库进行获取的</span></span><br><span class="line">  $person = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">"name"</span>=&gt;<span class="string">"胡聪聪"</span>,</span><br><span class="line">    <span class="string">"gender"</span>=&gt;<span class="string">"男1"</span>,</span><br><span class="line">    <span class="string">"hobby"</span>=&gt;<span class="string">"女1"</span></span><br><span class="line">  )</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;p&gt;姓名：&lt;span&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $person[<span class="string">'name'</span>];  <span class="meta">?&gt;</span>&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;性别：&lt;span&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $person[<span class="string">'gender'</span>]; <span class="meta">?&gt;</span>&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;爱好：&lt;span&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $person[<span class="string">'hobby'</span>] <span class="meta">?&gt;</span>&lt;/span&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<h3 id="服务端渲染总结"><a href="#服务端渲染总结" class="headerlink" title="服务端渲染总结"></a>服务端渲染总结</h3><ul>
<li>我们使用php动态渲染页面时，有很多比较麻烦的地方。</li>
<li>在前端写好页面以后，需要后台进行修改，意味这后端程序员也需要懂前端的知识，其实渲染的工作应该交给前端来做。</li>
<li>前端没有写好页面的话，后端无法开始工作，需要等待前端的页面完成之后才能开始工作，拖延项目的进度。</li>
<li>这种渲染，属于同步渲染，页面加载速度比较慢，会影响后面的内容的渲染速度。</li>
</ul>
<h2 id="http协议"><a href="#http协议" class="headerlink" title="http协议"></a>http协议</h2><p>协议是指计算机通信网络中两台计算机之间进行通信所必须共同遵守的规定或规则</p>
<p>HTTP协议，即超文本传输协议(Hypertext transfer protocol)。是一种详细规定了浏览器和服务器之间互相通信的规则，HTTP协议分为请求 和响应 两个部分组成。</p>
<h3 id="请求与请求报文"><a href="#请求与请求报文" class="headerlink" title="请求与请求报文"></a>请求与请求报文</h3><p>get请求报文详解</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//--------------------------请求行--------------------------------</span></span><br><span class="line"><span class="comment">// GET  请求方式</span></span><br><span class="line"><span class="comment">// /day02/01.php?username=hucc&amp;password=123456    请求路径+参数（注意点）</span></span><br><span class="line"><span class="comment">// HTTP/1.1 HTTP的版本号</span></span><br><span class="line"></span><br><span class="line">GET /day02/<span class="number">01.</span>php?username=hucc&amp;password=<span class="number">123456</span> HTTP/<span class="number">1.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//--------------------------请求头--------------------------------</span></span><br><span class="line"><span class="comment">// Host:主机地址</span></span><br><span class="line">Host: www.study.com</span><br><span class="line"><span class="comment">// HTTP1.1版本默认开启，建立过连接后，TCP连接不会断开，下次连接可以继续使用（底层，不用管）</span></span><br><span class="line">Connection: keep-alive</span><br><span class="line"><span class="comment">//chrome浏览器自己增加的，不用管</span></span><br><span class="line">Upgrade-Insecure-Requests: <span class="number">1</span></span><br><span class="line"><span class="comment">//浏览器的代理字符串（版本信息）</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; WOW64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">58.0</span><span class="number">.3029</span><span class="number">.96</span> Safari/<span class="number">537.36</span></span><br><span class="line"><span class="comment">//浏览器端可以接受的类型。</span></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/webp,<span class="string">`*/*`</span>;q=<span class="number">0.8</span></span><br><span class="line"><span class="comment">//从哪个页面发出的请求</span></span><br><span class="line">Referer: http:<span class="comment">//www.study.com/day02/01-login.html</span></span><br><span class="line"><span class="comment">//检查浏览器支持的压缩方式</span></span><br><span class="line">Accept-Encoding: gzip, deflate, sdch</span><br><span class="line"><span class="comment">//浏览器支持的语言，优先中文。</span></span><br><span class="line">Accept-Language: zh-CN,zh;q=<span class="number">0.8</span>,en;q=<span class="number">0.6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//----------------------------请求体-------------------------------------</span></span><br><span class="line"><span class="comment">//get请求没有请求体，但是参数会拼接到请求行中</span></span><br></pre></td></tr></table></figure>
<p>post请求报文详解</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//-----------------------请求行---------------------------------------------</span></span><br><span class="line">POST /day02/<span class="number">01.</span>php HTTP/<span class="number">1.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//-----------------------请求头--------------------------------------------</span></span><br><span class="line">Host: www.study.com</span><br><span class="line">Connection: keep-alive</span><br><span class="line"><span class="comment">//传递的参数的长度。</span></span><br><span class="line">Content-Length: <span class="number">29</span></span><br><span class="line">Cache-Control: max-age=<span class="number">0</span></span><br><span class="line">Origin: http:<span class="comment">//www.study.com</span></span><br><span class="line">Upgrade-Insecure-Requests: <span class="number">1</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; WOW64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">58.0</span><span class="number">.3029</span><span class="number">.96</span> Safari/<span class="number">537.36</span></span><br><span class="line"><span class="comment">//内容类型：表单数据，如果是post请求，必须指定这个属性。</span></span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/webp,<span class="string">`*/*`</span>;q=<span class="number">0.8</span></span><br><span class="line">Referer: http:<span class="comment">//www.study.com/day02/01-login.html</span></span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=<span class="number">0.8</span>,en;q=<span class="number">0.6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------------请求体------------------------------------------</span></span><br><span class="line">username=hucc&amp;password=<span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>GET请求与POST请求的对比</p>
<ul>
<li>GET请求没有请求体，因为GET请求的参数拼接到地址栏中了</li>
<li>POST请求有请求体，就是传递的参数</li>
<li>POST请求需要指定<code>content-type</code>属性。</li>
</ul>
<h3 id="响应与响应报文"><a href="#响应与响应报文" class="headerlink" title="响应与响应报文"></a>响应与响应报文</h3><p>响应报文详解</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//---------------------状态行（响应行）-------------------------------</span></span><br><span class="line"><span class="comment">//HTTP/1.1  HTTP版本</span></span><br><span class="line"><span class="comment">//200 响应的状态</span></span><br><span class="line">    <span class="comment">//200表示成功</span></span><br><span class="line">    <span class="comment">//304表示读缓存</span></span><br><span class="line">    <span class="comment">//404表示找不到资源</span></span><br><span class="line">    <span class="comment">//500表示服务端错误</span></span><br><span class="line"></span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line"></span><br><span class="line"><span class="comment">//----------------------响应头-----------------------------------------------</span></span><br><span class="line"><span class="built_in">Date</span>: Thu, <span class="number">22</span> Jun <span class="number">2017</span> <span class="number">16</span>:<span class="number">51</span>:<span class="number">22</span> GMT</span><br><span class="line">Server: Apache/<span class="number">2.4</span><span class="number">.23</span> (Win32) OpenSSL/<span class="number">1.0</span><span class="number">.2</span>j PHP/<span class="number">5.4</span><span class="number">.45</span></span><br><span class="line">X-Powered-By: PHP/<span class="number">5.4</span><span class="number">.45</span></span><br><span class="line">Content-Length: <span class="number">18</span></span><br><span class="line">Keep-Alive: timeout=<span class="number">5</span>, max=<span class="number">100</span></span><br><span class="line">Connection: Keep-Alive</span><br><span class="line"><span class="comment">//内容类型，告诉浏览器该如何解析响应结果</span></span><br><span class="line">Content-Type: text/html;charset=utf<span class="number">-8</span></span><br><span class="line"><span class="comment">//-----------------------响应体------------------------------------------------</span></span><br><span class="line"><span class="comment">//后台文件返回的结果</span></span><br><span class="line"></span><br><span class="line">用户登录成功</span><br></pre></td></tr></table></figure>
<p>通常来说，我们不会用抓包工具来查看请求和响应，太麻烦了，可以直接使用谷歌浏览器来查看请求报文和响应报文。</p>
<p>谷歌浏览器会对报文进行一定的格式化，看起来虽然不是原生的报文，但是使用起来更加的方便简洁。</p>
<h2 id="pre标签"><a href="#pre标签" class="headerlink" title="pre标签"></a>pre标签</h2><p><code>&lt;pre&gt;&lt;/pre&gt;</code></p>
<p>被包围在 <code>pre</code> 元素中的文本通常会保留空格和换行符。而文本也会呈现为等宽字体。</p>
<p>常见应用就是用来表示计算机的源代码。</p>
<h2 id="Ajax详解"><a href="#Ajax详解" class="headerlink" title="Ajax详解"></a>Ajax详解</h2><p>即 Asynchronous [e’sɪŋkrənəs] Javascript And XML， AJAX 不是一门的新的语言，而是对现有技术的综合利用。 本质是在HTTP协议的基础上以异步的方式与服务器进行通信。</p>
<h3 id="同步与异步"><a href="#同步与异步" class="headerlink" title="同步与异步"></a>同步与异步</h3><p>同步和异步概念：</p>
<ul>
<li>同步: 指的就是事情要一件一件做。等做完前一件才能做后一件任务</li>
<li>异步: 不受当前任务的影响，两件事情同时进行，做一件事情时，不影响另一件事情的进行。</li>
</ul>
<p>编程中：异步程序代码执行时不会阻塞其它程序代码执行,从而提升整体执行效率。</p>
<p>网页异步应用：</p>
<ul>
<li>验证你的用户名是否已经存在（一边输入，一边获取你的信息，和后台比对）。</li>
<li>百度搜索提示，及相关内容展示（一边输入，一边找出了你可能要的内容）。</li>
<li>新浪微博评论（异步加载）。</li>
</ul>
<h3 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h3><p>Ajax不是一种新的编程语言，而是一种用于创建更好更快以及交互性更强的Web应用程序的技术。</p>
<p>浏览器内建对象，用于与服务器通信(交换数据) ， 由此我们便可实现对网页的部分更新，而不是刷新整个页面。这个请求是异步，即在往服务器发送请求时，并不会阻碍程序的运行，浏览器会继续渲染后续的结构。</p>
<p>创建一个XMLHttpRequest对象</p>
<p><code>var xhr = new XMLHttpRequest();</code></p>
<p>构造函数没有参数或者不传参数，可以不要括号；</p>
<h4 id="发送请求"><a href="#发送请求" class="headerlink" title="发送请求"></a>发送请求</h4><p>发送get请求</p>
<ul>
<li>设置请求行：<code>xhr.open(&quot;get&quot;,&quot;地址?参数&amp;参数&quot;);</code>–get是把参数拼接到地址后面的；</li>
<li>设置请求头：get不用设置请求头大部分的请求头都是由浏览器自动完成的；</li>
<li>设置请求体：<code>xhr.send(null);</code> get的参数是拼接到请求行的地址后面；参数设置为null；请求体必须设置，表示请求设置完毕，发送请求；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用XMLHttpRequest发送get请求的步骤</span></span><br><span class="line"><span class="comment">// 1. 创建一个XMLHttpRequest对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;<span class="comment">//构造函数没有参数的情况,括号可以省略</span></span><br><span class="line"><span class="comment">// 2. 设置请求行</span></span><br><span class="line"><span class="comment">// 第一个参数:请求方式  get/post</span></span><br><span class="line"><span class="comment">// 第二个参数:请求的地址 需要在url后面拼上参数列表</span></span><br><span class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"08.php?name=hucc"</span>);</span><br><span class="line"><span class="comment">// 3. 设置请求头</span></span><br><span class="line"><span class="comment">// 浏览器会给我们默认添加基本的请求头,get请求时无需设置</span></span><br><span class="line"><span class="comment">// 4. 设置请求体</span></span><br><span class="line"><span class="comment">// get请求的请求体为空,因为参数列表拼接到url后面了</span></span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>get请求,设置请求行时,需要把参数列表拼接到url后面</li>
<li>get请求不用设置请求头</li>
<li>get请求的请求体为null</li>
</ul>
<p>发送post请求</p>
<ul>
<li>设置请求行：<code>xhr.open(&quot;post&quot;,&quot;地址&quot;);</code>–post参数不会拼接到地址后面，设置在请求体；</li>
<li>设置请求头：<code>xhr.setRequestHeader(&quot;content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);</code>–post必须设置；</li>
<li>设置请求体：<code>xhr.send(&quot;参数1&amp;参数2&quot;);</code>– 参数用&amp;隔开；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</span><br><span class="line"><span class="comment">//1. 设置请求行 post请求的参数列表在请求体中</span></span><br><span class="line">xhr.open(<span class="string">"post"</span>, <span class="string">"09.php"</span>);</span><br><span class="line"><span class="comment">//2. 设置请求头, post请求必须设置content-type,不然后端无法获取到数据</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">"content-type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line"><span class="comment">//3. 设置请求体</span></span><br><span class="line">xhr.send(<span class="string">"name=hucc&amp;age=18"</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>post请求,设置请求行时,参数列表不能拼接到url后面</li>
<li>post必须设置请求头中的<code>content-type</code>为<code>application/x-www-form-urlencoded</code></li>
<li>post请求需要将参数列表设置到请求体中.</li>
</ul>
<p>同步与异步</p>
<p><code>xhr.open(&quot;get&quot;,&quot;地址&quot;,布尔类型)</code>–默认为true，异步执行；设置为false时，同步执行；</p>
<h4 id="获取响应"><a href="#获取响应" class="headerlink" title="获取响应"></a>获取响应</h4><p>readystatechange事件：监听XMLHttpRequest对象状态；发生改变时触发；</p>
<p><code>xhr.readyState</code></p>
<ul>
<li>readyState:记录了XMLHttpRequest对象的当前状态</li>
<li>请求未初始化。发生在创建XMLHttpRequest对象之后；</li>
<li>请求已经建立，但是还没有开始发送。发生在设置请求头之后；</li>
<li>请求已发送，正在处理中；理论上发生在请求体之后，但是需要时间，所以不是即时生效；</li>
<li>请求在处理中；通常响应中已有部分数据可用了，但是服务器还没有完成响应的生成。</li>
<li>响应已完成；您可以获取并使用服务器的响应了。(我们只需要关注状态4即可)</li>
</ul>
<p>响应行：<code>xhr.status</code></p>
<ul>
<li>http状态码</li>
<li>200表示成功</li>
<li>304表示读缓存</li>
<li>404表示找不到资源</li>
<li>500表示服务端错误</li>
</ul>
<p>响应头</p>
<ul>
<li><code>xhr.getAllResponseHeaders();</code>–获取响应头所有信息；</li>
<li><code>xhr.getResponseHeader(&quot;content-type&quot;);</code>–获取响应头指定的信息；</li>
</ul>
<p>响应体：<code>xhr.responseText</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 响应结束了</span></span><br><span class="line">  <span class="keyword">if</span>(xhr.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="comment">// 成功了</span></span><br><span class="line">    <span class="keyword">if</span>(xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span>(xhr.responseText === <span class="string">"存在"</span>) &#123;</span><br><span class="line">        span.innerText = <span class="string">"该用户名太受欢迎了，要不换一个？"</span>;</span><br><span class="line">        span.style.color = <span class="string">"red"</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        span.innerText = <span class="string">"可以使用"</span>;</span><br><span class="line">        span.style.color = <span class="string">"green"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      alert(<span class="string">"服务器繁忙，请稍候再试"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数据交互"><a href="#数据交互" class="headerlink" title="数据交互"></a>数据交互</h2><p>浏览器端只是负责用户的交互和数据的收集以及展示，真正的数据都是存储在服务器端的。我们现在通过ajax的确可以返回一些简单的数据（一个字符串），但是在实际开发过程中，肯定会会涉及到大量的复杂类型的数据传输，比如数组、对象等，但是每个编程语言的语法都不一样。因此我们会采用通用的数据交换格式（XML、JSON）来进行数据的交互。</p>
<p>对于大量复杂数据交互，用通用的数据格式来传输数据；</p>
<h3 id="XML（重量级）"><a href="#XML（重量级）" class="headerlink" title="XML（重量级）"></a>XML（重量级）</h3><ul>
<li>XML 指可扩展标记语言（EXtensible Markup Language）</li>
<li>XML 是一种标记语言，很类似 HTML</li>
<li>XML 的设计宗旨是传输数据，而非显示数据</li>
<li>XML 标签没有被预定义。您需要自行定义标签。</li>
</ul>
<p>语法规范</p>
<ul>
<li>必须有一个根元素（有且仅有一个）</li>
<li>标签不可有空格、不可以数字或.开头、大小写敏感</li>
<li>不可交叉嵌套，都是双标签，如果是单标签，必须闭合</li>
<li>属性双引号（浏览器自动修正成双引号了）</li>
<li>注释和HTML一样</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">students</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">student</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>18<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gender</span>&gt;</span>男<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">desc</span>&gt;</span>路人甲<span class="tag">&lt;/<span class="name">desc</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">student</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>20<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gender</span>&gt;</span>男<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">desc</span>&gt;</span>路人乙<span class="tag">&lt;/<span class="name">desc</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">students</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>php获取xml文件的内容</p>
<p>注意，如果需要返回xml数据，需要把<code>content-type</code>改成<code>text/xml</code>,不然浏览器以<code>text/html</code>进行解析。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line">header(<span class="string">'content-type:text/xml;charset=utf-8'</span>);</span><br><span class="line"><span class="comment">//用于获取文件的内容</span></span><br><span class="line"><span class="comment">//参数：文件的路径</span></span><br><span class="line">$result = file_get_contents(<span class="string">"data.xml"</span>);</span><br><span class="line"><span class="keyword">echo</span> $result;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>html解析xml</p>
<p>服务端返回的数据需要使用<code>xhr.responseXML</code>，这是一个document对象，可以使用DOM中的方法查找元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取服务端返回的xml数据，需要使用xhr.responseXML，这是一个document对象，可以使用DOM中的方法查找元素。</span></span><br><span class="line"><span class="keyword">var</span> data = xhr.responseXML;</span><br><span class="line"><span class="comment">//获取所有的学生</span></span><br><span class="line"><span class="keyword">var</span> students = data.querySelectorAll(<span class="string">"student"</span>);</span><br></pre></td></tr></table></figure>
<p>缺点：虽然可以描述和传输复杂数据，但是其解析过于复杂并且体积较大，所以实现开发已经很少使用了。</p>
<h3 id="JSON数据（轻量级）"><a href="#JSON数据（轻量级）" class="headerlink" title="JSON数据（轻量级）"></a>JSON数据（轻量级）</h3><p>JSON(JavaScript Object Notation, JS 对象标记) 是一种轻量级的数据交换格式。它基于 ECMAScript 规范的一个子集，采用完全独立于编程语言的文本格式来存储和表示数据。</p>
<ul>
<li>数据在名称/值对中</li>
<li>数据由逗号分隔(最后一个健/值对不能带逗号)</li>
<li>花括号保存对象，方括号保存数组</li>
<li>键使用双引号</li>
</ul>
<p>json实际是字符串，数据传输的是字符串；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>: <span class="string">'Hello'</span>, <span class="attr">b</span>: <span class="string">'World'</span>&#125;; <span class="comment">//这是一个js对象，注意键名也是可以使用引号包裹的</span></span><br><span class="line"><span class="keyword">var</span> json = <span class="string">'&#123;"a": "Hello", "b": "World"&#125;'</span>; <span class="comment">//这是一个 JSON 字符串，本质是一个字符串</span></span><br></pre></td></tr></table></figure>
<ul>
<li>JSON 是 JS 对象的字符串表示法，它使用文本表示一个 JS 对象的信息，本质是一个字符串。</li>
<li>不同的语言各自也都对应有解析方法，需要解析完成后才能读取</li>
<li>JSON 和 JS 对象之间互转</li>
</ul>
<p>json与js对象的相互转换</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JS对象 ==&gt; JSON字符串 `JSON.stringify(obj)`</span></span><br><span class="line"><span class="comment">//obj是一个js对象</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>: <span class="string">'Hello'</span>, <span class="attr">b</span>: <span class="string">'World'</span>&#125;</span><br><span class="line"><span class="comment">//result就变成了一个json字符串了</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="built_in">JSON</span>.stringify(obj);<span class="comment">// '&#123;"a": "Hello", "b": "World"&#125;'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON字符串 ==&gt; JS对象  JSON.parse(obj)</span></span><br><span class="line"><span class="comment">//json是一个json字符串</span></span><br><span class="line"><span class="keyword">var</span> json = <span class="string">'&#123;"a": "Hello", "b": "World"&#125;'</span>;</span><br><span class="line"><span class="comment">//obj就变成了一个js对象</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(json);<span class="comment">// &#123;a: 'Hello', b: 'World'&#125;</span></span><br></pre></td></tr></table></figure>
<p>php处理json</p>
<p>php关联数组 ==&gt; json</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// php的关联数组</span></span><br><span class="line">$obj = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">"a"</span>=&gt;<span class="string">"hello"</span>,</span><br><span class="line">  <span class="string">"b"</span>=&gt;<span class="string">"world"</span>,</span><br><span class="line">  <span class="string">"name"</span>=&gt;<span class="string">"胡聪聪"</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">//json字符串</span></span><br><span class="line">$json = json_encode($obj);</span><br><span class="line"><span class="comment">//json_encode($data, JSON_UNESCAPED_UNICODE); //必须PHP5.4+ ；JSON_UNESCAPED_UNICODE让中文不转义，不是编码显示；可以不传递；</span></span><br><span class="line"><span class="keyword">echo</span> $json;</span><br></pre></td></tr></table></figure>
<p>json ===&gt; php对象</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$json = <span class="string">'&#123;"a": "Hello", "b": "World"&#125;'</span>;<span class="comment">//json字符串</span></span><br><span class="line"><span class="comment">//第一个参数：json字符串</span></span><br><span class="line"><span class="comment">//第二个参数：</span></span><br><span class="line">    <span class="comment">//false，将json转换成对象(默认)</span></span><br><span class="line">    <span class="comment">//true：将对象转换成数组(推荐)</span></span><br><span class="line">$obj = json_decode($json,<span class="keyword">true</span>);</span><br><span class="line"><span class="keyword">echo</span> $obj[<span class="string">'a'</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过json文件获取到的内容就是一个json字符串。</span></span><br><span class="line">$data = file_get_contents(<span class="string">"data.json"</span>);</span><br><span class="line"><span class="comment">//将json转换成数组</span></span><br><span class="line">$result = json_decode($data, <span class="keyword">true</span>);</span><br><span class="line">print_r($result);</span><br></pre></td></tr></table></figure>
<p>eval方法</p>
<p><code>eval()</code> 函数可计算某个字符串，并执行其中的的 JavaScript 代码。eval的参数是一个字符串，这个字符串是需要执行的表达式或者语句。</p>
<p>eval函数的功能非常的强大，但是实际使用的情况并不多。</p>
<ul>
<li>eval形式的代码难以阅读</li>
<li>eval形式的代码无法打断点，因为本质还是还是一个字符串</li>
<li>在浏览器端执行任意的 JavaScript会带来潜在的安全风险，恶意的JavaScript代码可能会破坏应用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eval方法可以直接转换字符串数组，但是对象则有些特殊；</span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">'[1,2,3,4,5]'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>(<span class="string">"&#123;&#125;"</span>));<span class="comment">//undefined，因为&#123;&#125;被当成了代码块</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>(<span class="string">"(&#123;&#125;)"</span>));<span class="comment">//obj，因为&#123;&#125;用()引起来了。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用这个方法，也可以将一个json字符串转换成js对象。</span></span><br><span class="line"><span class="keyword">var</span> json = <span class="string">'&#123;"name":"zs", "age":18, "sex":"男"&#125;'</span>;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">eval</span>(<span class="string">"("</span> + json + <span class="string">")"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br></pre></td></tr></table></figure>
<h2 id="jQuery的Ajax方法"><a href="#jQuery的Ajax方法" class="headerlink" title="jQuery的Ajax方法"></a>jQuery的Ajax方法</h2><ul>
<li><code>$.ajax({obj})</code><ul>
<li>type:请求类型；</li>
<li>url:请求地址；</li>
<li>data:请求发送的参数；可以是字符串，可以是对象，<ul>
<li>表单序列化，这两个方法data能够直接识别；</li>
<li><code>$(&quot;form&quot;).serialize()</code>–会把form表单中所有有name属性的name值和value值都拼接起来；返回一个字符串；</li>
<li><code>$(&quot;form&quot;).serializeArray()</code>–会把form表单中所有有name属性的name值和value值都拼接起来；返回一个数组；</li>
</ul>
</li>
<li>dataType:服务器响应返回的数据格式，不传递会根据数据的content-type进行判定；</li>
<li>timeout:超时时间，服务器在时间内没有响应，会判定响应失败；单位毫秒；</li>
<li>success:服务器响应成功调用的函数；</li>
<li>error:服务器响应失败调用的函数；</li>
<li>beforeSend:发送请求前调用的函数；</li>
<li>complete:请求完成后的回调函数；不管响应成功还是失败，都能执行；</li>
</ul>
</li>
<li><code>$.post(url,data,success,dataType);</code>–post请求；</li>
<li><code>$.get(url,data,success,dataType);</code>–get请求；</li>
<li><code>$.getJSON(url,data,success);</code>–请求载入服务器上指定url的JSON文件；</li>
<li><code>$.getScript(url,data,success);</code>–请求载入服务器上指定url的js文件；</li>
<li><code>$(&quot;div&quot;).load(url,data,success);</code>–在div中载入服务器上指定url的html页面。<ul>
<li>可以用来加载公共页面</li>
<li>缺点是会额外加载引入的页面</li>
</ul>
</li>
</ul>
<h2 id="接口化开发"><a href="#接口化开发" class="headerlink" title="接口化开发"></a>接口化开发</h2><p>请求地址即所谓的接口，通常我们所说的接口化开发，其实是指一个接口对应一个功能， 并且严格约束了请求参数 和响应结果 的格式，这样前后端在开发过程中，可以减少不必要的讨论， 从而并行开发，可以极大的提升开发效率，另外一个好处，当网站进行改版后，服务端接口进行调整时，并不影响到前端的功能。</p>
<p>接口文档</p>
<p>实现前后端分离</p>
<h2 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h2><p>是为了使用户界面与业务数据（内容）分离而产生的，它可以生成特定格式的文档，用于网站的模板引擎就会生成一个标准的HTML文档。 数据+模版 = 最终需要显示的结构（动态）；</p>
<p>我们通过ajax获取到数据后，需要把数据渲染到页面，在学习模板引擎前，我们的做法是大量的拼接字符串，对于结构简单的页面，这么做还行；</p>
<p>但是如果页面结构很复杂，使用拼串的话代码可阅读性非常的差，而且非常容易出错，后期代码维护也是相当的麻烦。</p>
<h3 id="常见的模板引擎"><a href="#常见的模板引擎" class="headerlink" title="常见的模板引擎"></a>常见的模板引擎</h3><ul>
<li>BaiduTemplate：<a href="http://tangram.baidu.com/BaiduTemplate/" target="_blank" rel="noopener">http://tangram.baidu.com/BaiduTemplate/</a></li>
<li>velocity.js：<a href="https://github.com/shepherdwind/velocity.js/" target="_blank" rel="noopener">https://github.com/shepherdwind/velocity.js/</a></li>
<li>ArtTemplate：<a href="https://github.com/aui/artTemplate" target="_blank" rel="noopener">https://github.com/aui/artTemplate</a></li>
</ul>
<h3 id="artTemplate的使用"><a href="#artTemplate的使用" class="headerlink" title="artTemplate的使用"></a>artTemplate的使用</h3><ul>
<li>引入模板引擎的js文件</li>
<li>准备模板：写死的静态页面；</li>
<li>准备数据：从后端获取动态数据；</li>
<li>使用template方法将模板和数据绑定；</li>
<li>使用artTemplate语法修改模板；</li>
<li>渲染到页面中；</li>
<li>artTemplate的each语法：<ul>
<li>如果返回的数据是个数组，必须使用对象进行包裹，因为在&amp;#123&amp;#123&amp;#125&amp;#125中只写书写对象的属性。</li>
<li>模板中可以直接使用对象的属性， 如果返回的数据直接就是一个数组。</li>
<li>注意：如果直接是一个数组的话，需要使用对象包裹一下，给数组起了一个名字</li>
</ul>
</li>
<li>artTemplate的中文文档：<a href="https://aui.github.io/art-template/zh-cn/docs/syntax.html" target="_blank" rel="noopener">https://aui.github.io/art-template/zh-cn/docs/syntax.html</a></li>
</ul>
<p>完整版代码</p>
<ul>
<li>指定了type为text/html后，这一段script标签并不会解析，也不会显示。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 展示个人信息 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 1. 引入模板引擎文件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"template-web.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 2. 准备模板,模版需要指定type:text/html  不会在页面中显示 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/html"</span> <span class="attr">id</span>=<span class="string">"tpl"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>性别：&#123;&#123; gender &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>爱好：&#123;&#123; hobby &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述：&#123;&#123; desc &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//3. 准备数据,先从服务端获取到数据</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> obj = &#123;</span></span><br><span class="line"><span class="javascript">      name: <span class="string">"隔壁小王"</span>,</span></span><br><span class="line"><span class="javascript">      gender: <span class="string">"男2"</span>,</span></span><br><span class="line"><span class="undefined">      age: 25,</span></span><br><span class="line"><span class="javascript">      hobby: <span class="string">"串门"</span>,</span></span><br><span class="line"><span class="javascript">      desc: <span class="string">"年轻气力盛1111"</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//4. 结合模板和数据(就会产生一个html的结构)</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 在模板中可以使用对象的任意的属性。</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//参数1：模板的id, 直接写id即可，不需要加#</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//参数2：数据，对象</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//返回值：根据模板生成的字符串。</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> html = template(<span class="string">"tpl"</span>, obj);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//5. 把结果显示到页面中</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> div = <span class="built_in">document</span>.querySelector(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="undefined">    div.innerHTML = html;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="同源与跨域"><a href="#同源与跨域" class="headerlink" title="同源与跨域"></a>同源与跨域</h2><h3 id="同源"><a href="#同源" class="headerlink" title="同源"></a>同源</h3><p>同源策略是浏览器的；</p>
<p>1995年，同源政策由 Netscape 公司引入浏览器。目前，所有浏览器都实行这个政策。</p>
<p>同源策略：最初，它的含义是指，A网页设置的 Cookie，B网页不能打开，除非这两个网页”同源”。所谓”同源”指的是”三个相同”。</p>
<p>同源必须保证三个一致</p>
<ul>
<li>协议相同</li>
<li>域名相同</li>
<li>端口相同</li>
</ul>
<p>举例来说，<a href="http://www.example.com/dir/page.html" target="_blank" rel="noopener">http://www.example.com/dir/page.html</a> 这个网址，协议是<code>http://</code>，域名是<code>www.example.com</code>，端口是80（默认端口可以省略）。它的同源情况如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//http://www.example.com/dir2/other.html：同源</span></span><br><span class="line"><span class="comment">//http://example.com/dir/other.html：不同源（域名不同）</span></span><br><span class="line"><span class="comment">//http://v2.www.example.com/dir/other.html：不同源（域名不同）</span></span><br><span class="line"><span class="comment">//http://www.example.com:81/dir/other.html：不同源（端口不同）</span></span><br></pre></td></tr></table></figure>
<p>同源策略的目的</p>
<p>同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。</p>
<p>某用户是网站A的管理员，用户只要登录网站A并且执行删除用户的操作就可以把网站A中的其他用户删除。当这个用户访问了网站A之后，又访问了一个网站B，这时候如果网站B可以获取到网站A的cookie，那么网站B就能伪造该用户的身份去访问网站A，即网站B也可以执行相同的操作去删除网站A中的其他用户，那这样带来的后果是不堪设想的。</p>
<p>CSRF攻击（跨站请求伪造）,因此同源策略是必须的，如果cookie可以在不同源的网站中共享，那么互联网将毫无安全可言。</p>
<p>同源策略的限制范围</p>
<p>虽然这些限制是很有必要的，但是也给我们日常开发带来不好的影响。比如实际开发过程中，往往都会把服务器端架设到一台甚至是一个集群的服务器中，把客户端页面放到另外一个单独的服务器。那么这时候就会出现不同源的情况，如果我们知道两个网站都是安全的话，我们是希望两个不同源的网站之间可以相互请求数据的。这就需要使用到跨域 。</p>
<ul>
<li>随着互联网的发展，“同源策略”越来越严格，目前，如果非同源，以下三种行为都将收到限制。</li>
<li>Cookie、LocalStorage 和 IndexDB 无法读取。</li>
<li>DOM 无法获得。</li>
<li>AJAX 请求不能发送。</li>
</ul>
<h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><p>JSONP(JSON with Padding)、可用于解决主流浏览器的跨域数据访问的问题。原理：服务端返回一个预先定义好的javascript函数的调用，并且将服务器的数据以该函数参数的形式传递过来，这个方法需要前后端配合。</p>
<p>特殊标签是不受同源策略限制的</p>
<p>script 标签是不受同源策略的限制的，它可以载入任意地方的 JavaScript 文件，而并不要求同源。类似的还有img和link标签 ；</p>
<ul>
<li><code>&lt;img src=&quot;http://www.api.com/1.jpg&quot; alt=&quot;&quot;&gt;</code></li>
<li><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;http://www.api.com/1.css&quot;&gt;</code></li>
<li><code>&lt;script src=&quot;http://www.api.com/1.js&quot;&gt;&lt;/script&gt;</code></li>
</ul>
<p>script标签src引入</p>
<ul>
<li>jsonp的原理：script标签引入文件不受同源策略限制；</li>
<li>script标签src引入的文件会执行，最后返回给浏览器的都是字符串；因此script可以引入php文件；</li>
<li>所以通过PHP文件返回的数据会被script标签引入时执行；</li>
<li>后端返回一个函数调用，将数据当做函数的实参传入；在script标签引入的时候会执行这个函数；</li>
<li>前端提前声明一个函数，设置形参，通过后端返回的函数调用可以获取到数据；</li>
<li>jsonp前后端约定，通过callback把声明的函数名传递给后端，后端通过这个函数名返回函数调用；</li>
<li>后端把json数据包裹后返回，就叫做jsonp(JSON with Padding)；</li>
</ul>
<p>jsonp演化过程1</p>
<p>php文件</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">header(<span class="string">"content-type:text/html;charset=utf-8"</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"alert(1111)"</span>;</span><br></pre></td></tr></table></figure>
<p>html文件 <code>&lt;script src=&quot;http://www.api.com/testjs.php&quot;&gt;&lt;/script&gt;</code></p>
<p>原理：其实src的路径是什么文件不重要，无论引入js文件还是php文件，最后返回给浏览器的都是字符串，因此我们script标签是可以引入一个php文件的。</p>
<p>jsonp演化过程2</p>
<p>php文件</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">header(<span class="string">"content-type:text/html;charset=utf-8"</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"var a = 118;"</span>;</span><br></pre></td></tr></table></figure>
<p>html文件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://www.api.com/testjs.php"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">//a打印出来了118</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(a);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们现在做到了一件事情，从不同源的php文件中获取到了数据；</p>
<p>缺点：获取数据的script标签必须写在使用的script标签的前面，必须保证先有数据才能对数据进行渲染。</p>
<p>jsonp演化过程3</p>
<p>php代码</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">header(<span class="string">"content-type:text/html;charset=utf-8"</span>);</span><br><span class="line">$arr = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">"name"</span>=&gt;<span class="string">"zs"</span>,</span><br><span class="line">    <span class="string">"age"</span>=&gt;<span class="number">18</span></span><br><span class="line">);</span><br><span class="line">$result = json_encode($arr);</span><br><span class="line"><span class="comment">//这是一段js函数的调用的代码，$result就是我们想要的数据</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"func($result)"</span>;</span><br></pre></td></tr></table></figure>
<p>js代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(data);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://www.api.com/testjs.php"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>缺点：后端必须知道前端声明的方法的名字，后端才能调用。</p>
<p>jsonp演化过程4</p>
<p>php代码</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">header(<span class="string">"content-type:text/html;charset=utf-8"</span>);</span><br><span class="line">$arr = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">"name"</span>=&gt;<span class="string">"zs"</span>,</span><br><span class="line">    <span class="string">"age"</span>=&gt;<span class="number">18</span></span><br><span class="line">);</span><br><span class="line">$result = json_encode($arr);</span><br><span class="line"><span class="comment">//这是一段js函数的调用的代码，$result就是我们想要的数据</span></span><br><span class="line"><span class="keyword">echo</span> $_GET[<span class="string">'callback'</span>].<span class="string">"($result)"</span>;</span><br></pre></td></tr></table></figure>
<p>javascript代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> button = <span class="built_in">document</span>.querySelector(<span class="string">"button"</span>);</span><br><span class="line">button.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">  script.src = <span class="string">"http://www.api.com/testjs.php?callback=fun"</span>;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>说白了，jsonp的原理就是 借助了script标签不受同源策略的限制，在服务端返回一个函数的调用，将数据当前调用函数的实参。在浏览器端，需要程序要声明一个函数，通过形参就可以获取到服务端返回的对应的值。</p>
<p><code>$.ajax({dataType:&quot;jsonp&quot;});</code></p>
<ul>
<li>jQuery的ajax方法只要指定dataType为”jsonp”，就可以跨域获取数据；</li>
<li>jsonp和ajax没有任何关系，不是通过ajax交互的；</li>
<li>jQuery通过script标签引入数据后，会删除这个script标签；</li>
<li>script标签src引入，对后台发送的是get请求；</li>
</ul>
<p>jsonp的函数封装</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">url, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">  <span class="keyword">var</span> fnName = <span class="string">"fn"</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().valueOf();</span><br><span class="line">  <span class="built_in">window</span>[fnName] = fn;</span><br><span class="line">  script.src = url + <span class="string">"?callback="</span> + fnName;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">header(<span class="string">'Content-Type:text/json; charset=utf-8'</span>);</span><br><span class="line">$arr = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">"name"</span> =&gt; <span class="string">"尼古拉斯赵四"</span>,</span><br><span class="line">  <span class="string">"desc"</span> =&gt; <span class="string">"亚洲舞王"</span></span><br><span class="line">);</span><br><span class="line">$result = json_encode($arr, JSON_UNESCAPED_UNICODE);</span><br><span class="line">$callback = $_GET[<span class="string">"callback"</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"$callback($result)"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jsonp(<span class="string">"http://192.168.34.31/day05/003-data.php"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">info</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(info);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="XMLHttpRequest2-0"><a href="#XMLHttpRequest2-0" class="headerlink" title="XMLHttpRequest2.0"></a>XMLHttpRequest2.0</h4><p>XMLHttpRequest是一个javascript内置对象，使得Javascript可以进行异步的HTTP通信。2008年2月，就提出了XMLHttpRequest Level 2 草案。</p>
<p>XMLHttpRequest1.0</p>
<ul>
<li>仅支持传输文本数据，无法传输二进制文件，比如图片视频等。</li>
<li>传输数据时，没有进度信息，只能提示完成与否。</li>
<li>受到了”同源策略”的限制</li>
</ul>
<p>XMLHttpRequest2.0</p>
<p>我们现在使用new XMLHttpRequest创建的对象就是2.0对象了，我们之前学的是1.0的语法，现在学习一些2.0的新特性即可。</p>
<p>可以设置timeout超时时间</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xhr.timeout = <span class="number">3000</span>;<span class="comment">//设置超时时间</span></span><br><span class="line"><span class="comment">//当时间超时的时候，会触发ontimeout事件</span></span><br><span class="line">xhr.ontimeout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="string">"请求超时"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以使用formData对象管理表单数据（好用）</p>
<ul>
<li>formData对象类似于jquery的serialize方法，用于收集表单数据；</li>
<li><code>var formData = new FormData(form)；</code><ul>
<li>参数：form是一个表单元素；收集此表单内的数据；</li>
<li>参数可以不传递，默认是一个空的表单元素</li>
</ul>
</li>
<li>formData对象可以直接作为 <code>xhr.send(formData)</code> 的参数。注意此时数据是以二进制的形式进行传输。</li>
<li>formData有一个append方法，可以添加额外参数。<code>formData.append(&quot;id&quot;, &quot;1111&quot;);</code></li>
<li>这种方式只能以post形式传递，不需要设置请求头，浏览器会自动为我们设置一个合适的请求头。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 使用formData必须发送post请求</span></span><br><span class="line">xhr.open(<span class="string">"post"</span>, <span class="string">"02-formData.php"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 获取表单元素</span></span><br><span class="line"><span class="keyword">var</span> form = <span class="built_in">document</span>.querySelector(<span class="string">"#myForm"</span>);</span><br><span class="line"><span class="comment">//3. 创建form对象，可以直接作为send的参数。</span></span><br><span class="line"><span class="keyword">var</span> formData = <span class="keyword">new</span> FormData(form);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. formData可以使用append方法添加参数</span></span><br><span class="line">formData.append(<span class="string">"id"</span>, <span class="string">"1111"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//5. 发送，不需要指定请求头，浏览器会自动选择合适的请求头</span></span><br><span class="line">xhr.send(formData);</span><br></pre></td></tr></table></figure>
<p>允许请求不同域名下的数据（跨域）</p>
<p>跨域资源共享(CORS)</p>
<p>新版本的XMLHttpRequest对象，可以向不同域名的服务器发出HTTP请求。这叫做”跨域资源共享”（Cross-origin resource sharing，简称CORS）。</p>
<p>浏览器支持这个功能（现在的浏览器都支持了XMLHttpRequest2.0）</p>
<p>服务器必须允许这种跨域。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务器允许跨域的代码：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 允许所有的域名访问这个接口</span></span><br><span class="line">header(<span class="string">"Access-Control-Allow-Origin:*"</span>);</span><br><span class="line"><span class="comment">// 允许www.study.com这个域名访问这个接口</span></span><br><span class="line">header(<span class="string">"Access-Control-Allow-Origin:http://www.study.com"</span>);</span><br></pre></td></tr></table></figure>
<p>CORS的具体流程</p>
<ol>
<li>浏览器会向发送一条请求，服务器接受到请求之后，会返回请求头信息，浏览器查看返回的响应头信息中是否设置了header(‘Access-Control-Allow-Origin:请求源域名或者*’);</li>
<li>如果没有设置，说明服务器不允许使用cors跨域，那么浏览器会把获取到的数据拦截。</li>
<li>如果返回的响应头中设置了 <code>header(&#39;Access-Control-Allow-Origin:请求源域名或者*&#39;);</code>,浏览器会跟请求头中的<code>Origin: http://www.study.com</code>进行对比，如果满足要求，就把数据发送给用户。</li>
<li>结论：跨域行为是浏览器行为，是浏览器阻止了ajax行为。服务器与服务器之间是不存在跨域的问题的</li>
</ol>
<p>jsonp与cors的对比</p>
<p>jsonp兼容性好，老版本浏览器也支持，但是jsonp仅支持get请求，发送的数据量有限。使用麻烦；</p>
<p>cors需要浏览器支持cors功能才行。但是使用简单，只要服务端设置允许跨域，对于客户端来说，跟普通的get、post请求并没有什么区别。</p>
<p>跨域的安全性问题：很多同学会觉得跨域能带来安全性问题，其实并不会，因为跨域是需要服务端配合的 ，也就是说不论jsonp还是cors，如果没有服务端的允许，浏览器是没法做到跨域的。</p>
<p>其他的跨域手段（没卵用）</p>
<p>以下方式基本不用啊，了解即可：</p>
<ol>
<li>顶级域名相同的可以通过domain.name来解决，即同时设置 <code>domain.name = 顶级域名（如example.com）</code></li>
<li><code>document.domain</code> + iframe</li>
<li><code>window.name</code> + iframe</li>
<li><code>location.hash</code> + iframe</li>
<li><code>window.postMessage()</code></li>
</ol>
<p>支持上传二进制文件，支持异步上传文件</p>
<p>以前，文件上传需要借助表单进行上传，但是表单上传是同步的，也就是说文件上传时，页面需要提交和刷新，用户体验不友好，xhr2.0中的formData对象支持文件的异步上传。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"img"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> img = <span class="built_in">document</span>.querySelector(<span class="string">"input"</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> div = <span class="built_in">document</span>.querySelector(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="javascript">  img.onchange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</span></span><br><span class="line"><span class="javascript">    xhr.open(<span class="string">"post"</span>, <span class="string">"03-file.php"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="comment">//formData除了可以收集表单的数据，用于文件的上传</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData();</span></span><br><span class="line"><span class="javascript">    formData.append(<span class="string">"img"</span>, img.files[<span class="number">0</span>]);</span></span><br><span class="line"><span class="undefined">    xhr.send(formData);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(xhr.responseText);</span></span><br><span class="line"><span class="javascript">        div.innerHTML = <span class="string">'&lt;img src="'</span> + xhr.responseText + <span class="string">'"&gt;'</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$tempFile = $_FILES[<span class="string">'img'</span>][<span class="string">"tmp_name"</span>];</span><br><span class="line">$fileName = <span class="string">"uploads/"</span> . $_FILES[<span class="string">'img'</span>][<span class="string">"name"</span>];</span><br><span class="line"></span><br><span class="line">move_uploaded_file($tempFile, $fileName);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $fileName;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以获取数据传输的进度信息</p>
<p>xhr2.0还支持获取上传文件的进度信息，因此我们可以根据进度信息可以实时的显示文件的上传进度。</p>
<ol>
<li>需要注册 <code>xhr.upload.onprogress = function(e){}</code> 事件，用于监听文件上传的进度.注意：需要在send之前注册。</li>
<li>上传的进度信息会存储事件对象e中</li>
<li>e.loaded表示已上传的大小   e.total表示整个文件的大小</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"img"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"outer"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> img = <span class="built_in">document</span>.querySelector(<span class="string">"input"</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> inner = <span class="built_in">document</span>.querySelector(<span class="string">".inner"</span>);</span></span><br><span class="line"><span class="javascript">  img.onchange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</span></span><br><span class="line"><span class="javascript">    xhr.open(<span class="string">"post"</span>, <span class="string">"04-file.php"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="comment">//formData除了可以收集表单的数据，用于文件的上传</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData();</span></span><br><span class="line"><span class="javascript">    formData.append(<span class="string">"img"</span>, img.files[<span class="number">0</span>]);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    xhr.upload.onprogress = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(e.total, e.loaded);</span></span><br><span class="line"><span class="javascript">      <span class="comment">//当前进度条的值/100 = e.loaded/e.total</span></span></span><br><span class="line"><span class="javascript">      inner.style.width = (e.loaded / e.total * <span class="number">100</span>).toFixed(<span class="number">2</span>) + <span class="string">"%"</span>;</span></span><br><span class="line"><span class="javascript">      inner.innerHTML = (e.loaded / e.total * <span class="number">100</span>).toFixed(<span class="number">2</span>) + <span class="string">"%"</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    xhr.send(formData);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(xhr.responseText);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $tempFile = $_FILES[<span class="string">'img'</span>][<span class="string">"tmp_name"</span>];</span><br><span class="line">  $fileName = <span class="string">"uploads/"</span>.$_FILES[<span class="string">'img'</span>][<span class="string">"name"</span>];</span><br><span class="line">  move_uploaded_file($tempFile, $fileName);</span><br><span class="line">  <span class="keyword">echo</span> $fileName;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果上传文件超过8M，php会报错，需要进行设置，允许php上传大文件。</p>
<p>修改php.ini文件</p>
<ul>
<li>允许提交的最大数据：663行，<code>post_max_size = 8M</code></li>
<li>允许上传的最大的文件为2M：791行，<code>upload_max_filesize = 2M</code></li>
</ul>
<h2 id="分页插件-bootstrap-paginator"><a href="#分页插件-bootstrap-paginator" class="headerlink" title="分页插件 bootstrap-paginator"></a>分页插件 bootstrap-paginator</h2><p>依赖与bootstrap的一款插件</p>
<p>引包 <code>&lt;script src=&quot;lib/bootstrap-paginator/bootstrap-paginator.js&quot;&gt;&lt;/script&gt;</code></p>
<p>提供一个ul作为分页的容器</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 显示分页 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text-right"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"paginator"</span> <span class="attr">class</span>=<span class="string">"pull-right"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>初始化分页</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#paginator"</span>).bootstrapPaginator(&#123;</span><br><span class="line">    bootstrapMajorVersion: <span class="number">3</span>,<span class="comment">//指定bootstrap的版本，如果是3必须指定</span></span><br><span class="line">    <span class="comment">//size: 'small', //指定控件的大小</span></span><br><span class="line">    currentPage: pageNum, <span class="comment">//设置当前页</span></span><br><span class="line">    <span class="comment">//numberOfPages: 5, //设置控件上最多显示的页数</span></span><br><span class="line">    totalPages: <span class="built_in">Math</span>.ceil(info.total / info.pageSize), <span class="comment">//设置总页数,应该计算出来</span></span><br><span class="line">    onPageClicked: <span class="function"><span class="keyword">function</span>(<span class="params">a,b,c,page</span>) </span>&#123;<span class="comment">//点击页码的时候会触发</span></span><br><span class="line">        <span class="built_in">console</span>.log(page);<span class="comment">//page就是点击的页码</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取到点击的页码，赋值给pageNum, 重新render</span></span><br><span class="line">        pageNum = page;</span><br><span class="line">        render();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p># </p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Ajax/" rel="tag"><i class="fa fa-tag"></i> Ajax</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/zh-cn/2017/07/29/移动Web/" rel="next" title="移动Web">
                <i class="fa fa-chevron-left"></i> 移动Web
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/zh-cn/2017/10/21/Git/" rel="prev" title="Git">
                Git <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_fav">收藏夹</a>
<a class="jiathis_button_copy">复制网址</a>
<a class="jiathis_button_email">邮件</a>
<a class="jiathis_button_weixin">微信</a>
<a class="jiathis_button_qzone">QQ空间</a>
<a class="jiathis_button_tqq">腾讯微博</a>
<a class="jiathis_button_douban">豆瓣</a>
<a class="jiathis_button_share">一键分享</a>

<a href="http://www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
  data_track_clickback:true,
  summary:"",
  shortUrl:false,
  hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script>
<!-- JiaThis Button END -->
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="Shiyi_" />
            
              <p class="site-author-name" itemprop="name">Shiyi_</p>
              <p class="site-description motion-element" itemprop="description">凭借自己的意志的话，罪与罚也都是全部由自己产生的，这些，都是理想的一部分；但，如果那些都是借来的，你所宣扬的就全都是空想。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yidianyuwen" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="Shiyidejavu@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/DejavuShiyi" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Ajax"><span class="nav-number">1.</span> <span class="nav-text">Ajax</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#浏览器的组成"><span class="nav-number">1.1.</span> <span class="nav-text">浏览器的组成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务器"><span class="nav-number">1.2.</span> <span class="nav-text">服务器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#客户端"><span class="nav-number">1.3.</span> <span class="nav-text">客户端</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#搭建HTTP服务器"><span class="nav-number">1.4.</span> <span class="nav-text">搭建HTTP服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#phpStudy介绍"><span class="nav-number">1.4.1.</span> <span class="nav-text">phpStudy介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#phpStudy的安装"><span class="nav-number">1.4.2.</span> <span class="nav-text">phpStudy的安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#phpStudy的错误解决"><span class="nav-number">1.4.3.</span> <span class="nav-text">phpStudy的错误解决</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#网络基础"><span class="nav-number">1.5.</span> <span class="nav-text">网络基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ip地址"><span class="nav-number">1.5.1.</span> <span class="nav-text">ip地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#端口"><span class="nav-number">1.5.2.</span> <span class="nav-text">端口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#域名"><span class="nav-number">1.5.3.</span> <span class="nav-text">域名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS服务器"><span class="nav-number">1.5.4.</span> <span class="nav-text">DNS服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#本地hosts"><span class="nav-number">1.5.5.</span> <span class="nav-text">本地hosts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#浏览器访问流程"><span class="nav-number">1.5.6.</span> <span class="nav-text">浏览器访问流程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PHP基础"><span class="nav-number">1.6.</span> <span class="nav-text">PHP基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#PHP初体验"><span class="nav-number">1.6.1.</span> <span class="nav-text">PHP初体验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PHP"><span class="nav-number">1.6.2.</span> <span class="nav-text">PHP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PHP变量"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">PHP变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PHP数组"><span class="nav-number">1.6.2.2.</span> <span class="nav-text">PHP数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#输出语句"><span class="nav-number">1.6.2.3.</span> <span class="nav-text">输出语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#语句"><span class="nav-number">1.6.2.4.</span> <span class="nav-text">语句</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表单处理"><span class="nav-number">1.6.3.</span> <span class="nav-text">表单处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件上传"><span class="nav-number">1.6.4.</span> <span class="nav-text">文件上传</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务端渲染"><span class="nav-number">1.7.</span> <span class="nav-text">服务端渲染</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#动态页面与静态页面"><span class="nav-number">1.7.1.</span> <span class="nav-text">动态页面与静态页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#服务端渲染页面"><span class="nav-number">1.7.2.</span> <span class="nav-text">服务端渲染页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#服务端渲染总结"><span class="nav-number">1.7.3.</span> <span class="nav-text">服务端渲染总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#http协议"><span class="nav-number">1.8.</span> <span class="nav-text">http协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#请求与请求报文"><span class="nav-number">1.8.1.</span> <span class="nav-text">请求与请求报文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#响应与响应报文"><span class="nav-number">1.8.2.</span> <span class="nav-text">响应与响应报文</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pre标签"><span class="nav-number">1.9.</span> <span class="nav-text">pre标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax详解"><span class="nav-number">1.10.</span> <span class="nav-text">Ajax详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#同步与异步"><span class="nav-number">1.10.1.</span> <span class="nav-text">同步与异步</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XMLHttpRequest"><span class="nav-number">1.10.2.</span> <span class="nav-text">XMLHttpRequest</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#发送请求"><span class="nav-number">1.10.2.1.</span> <span class="nav-text">发送请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取响应"><span class="nav-number">1.10.2.2.</span> <span class="nav-text">获取响应</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据交互"><span class="nav-number">1.11.</span> <span class="nav-text">数据交互</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#XML（重量级）"><span class="nav-number">1.11.1.</span> <span class="nav-text">XML（重量级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSON数据（轻量级）"><span class="nav-number">1.11.2.</span> <span class="nav-text">JSON数据（轻量级）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jQuery的Ajax方法"><span class="nav-number">1.12.</span> <span class="nav-text">jQuery的Ajax方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#接口化开发"><span class="nav-number">1.13.</span> <span class="nav-text">接口化开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模板引擎"><span class="nav-number">1.14.</span> <span class="nav-text">模板引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#常见的模板引擎"><span class="nav-number">1.14.1.</span> <span class="nav-text">常见的模板引擎</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#artTemplate的使用"><span class="nav-number">1.14.2.</span> <span class="nav-text">artTemplate的使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#同源与跨域"><span class="nav-number">1.15.</span> <span class="nav-text">同源与跨域</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#同源"><span class="nav-number">1.15.1.</span> <span class="nav-text">同源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#跨域"><span class="nav-number">1.15.2.</span> <span class="nav-text">跨域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#XMLHttpRequest2-0"><span class="nav-number">1.15.2.1.</span> <span class="nav-text">XMLHttpRequest2.0</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分页插件-bootstrap-paginator"><span class="nav-number">1.16.</span> <span class="nav-text">分页插件 bootstrap-paginator</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shiyi_</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客:<span id="busuanzi_value_site_pv"></span>
</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
